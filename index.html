<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For My Queen üëë</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Playfair+Display:ital,wght@0,400;1,600&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary-pink: #ff4d6d; --royal-gold: #d4af37; --deep-rose: #c9184a; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body, html { 
            margin: 0; padding: 0; width: 100%; height: 100%; 
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            font-family: 'Poppins', sans-serif; overflow: hidden;
            display: flex; justify-content: center; align-items: center;
        }

        #container {
            background: rgba(255, 255, 255, 0.94); backdrop-filter: blur(10px);
            padding: 30px; border-radius: 30px; text-align: center;
            width: 90%; max-width: 380px; z-index: 100;
            box-shadow: 0 15px 40px rgba(0,0,0,0.2);
        }

        h1 { font-family: 'Playfair Display', serif; color: var(--deep-rose); font-size: 1.6rem; margin-bottom: 30px; }
        .btn-wrapper { display: flex; justify-content: center; align-items: center; gap: 20px; min-height: 100px; position: relative; }
        
        button { padding: 14px 28px; border: none; border-radius: 50px; cursor: pointer; font-weight: 600; font-family: 'Poppins'; font-size: 1rem; transition: transform 0.2s ease; }
        #yesBtn { background: var(--primary-pink); color: white; z-index: 10; }
        #noBtn { background: #f1f3f5; color: #495057; border: 1px solid #ced4da; z-index: 1000; touch-action: none; position: relative; }
        
        .story-btn { background: var(--royal-gold); color: white; display: none; margin-top: 25px; width: 100%; }

        /* Book Modal */
        #bookModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center; }
        .book-page { background: #fffafa; width: 90%; height: 80vh; padding: 25px; border-radius: 20px; display: flex; flex-direction: column; border-left: 10px solid var(--royal-gold); }
        .book-text { flex-grow: 1; overflow-y: auto; font-family: 'Playfair Display', serif; text-align: left; }
        .book-text h2 { font-family: 'Dancing Script', cursive; color: var(--deep-rose); text-align: center; margin-top: 0; }
        .gallery { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 20px; }
        .gallery img { width: 100%; height: 90px; object-fit: cover; border-radius: 10px; border: 2px solid #fff; }
        .nav-btns { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; padding-top: 10px; border-top: 1px solid #eee; }
        .nav-btns button { background: none; color: var(--primary-pink); width: auto; padding: 5px; font-size: 0.9rem; }
        .heart { position: absolute; color: rgba(255, 77, 109, 0.4); font-size: 20px; pointer-events: none; animation: floatUp 4s linear infinite; }
        @keyframes floatUp { from { transform: translateY(110vh); } to { transform: translateY(-10vh); } }
    </style>
</head>
<body>

    <div id="container">
        <h1 id="question">Will you be my forever? üíç</h1>
        <div class="btn-wrapper" id="mainButtons">
            <button id="yesBtn" onclick="sayYes()">Yes</button>
            <button id="noBtn" onmouseover="moveButton()" ontouchstart="moveButton(event)">No</button>
        </div>
        <button id="storyBtn" class="story-btn" onclick="openBook()">Open My Heart üìñ</button>
    </div>

    <div id="bookModal">
        <div class="book-page">
            <div id="bookContent" class="book-text"></div>
            <div class="nav-btns">
                <button id="prevBtn" onclick="changePage(-1)">‚Üê Back</button>
                <span id="pageIndicator" style="font-size: 0.8rem; color: #888;"></span>
                <button id="nextBtn" onclick="changePage(1)">Next ‚Üí</button>
            </div>
            <button onclick="closeBook()" style="background:none; color:#bbb; font-size:11px; margin-top:10px; width:100%;">Close</button>
        </div>
    </div>

    <script>
        const chapters = [
            { title: "Chapter I: The Echo", text: "We started as two names on a list, two faces in a crowded room on a 'Welcome Day' that felt ordinary at the time.\n\nI didn‚Äôt know then that the girl sitting across the room would eventually become the reason I look forward to the morning." },
            { title: "Chapter II: The Shift", text: "Then the world moved us closer. New titles, new reasons to speak.\n\nWhat started as 'work' became 'us.' I began to notice the way you carried yourself‚Äîwith a grace that seemed effortless." },
            { title: "Chapter III: The Thread", text: "The office walls eventually faded, but our conversation didn‚Äôt.\n\nWe found a new home in the glow of our screens, weaving a thread of words that stretched from morning until the stars came out." },
            { title: "Chapter IV: The Song", text: "I‚Äôve learned the map of your reactions now. When I tell you that you are too bright for my eyes, you make those quiet, cute little noises‚Äîthe ones that tell me you can‚Äôt quite handle the praise." },
            { title: "Chapter V: The Warmth", text: "Being near you feels like finally standing in the right place.\n\nIt is a peaceful warmth, but it is also a storm in my chest. When you smile at me, my heart pounds with a rhythm I can‚Äôt control." },
            { title: "Chapter VI: The Realization", text: "I wrote this because words spoken out loud sometimes get lost in the heartbeat I feel when you're near.\n\nI eventually reached a point where 'just friends' felt like a beautiful book with the most important chapter missing." },
            { 
                title: "The Final Page: My Queen", 
                isFinal: true,
                text: "Now that we are walking this path together, I‚Äôve fallen for you faster than I ever thought possible.\n\nI miss you the moment you leave my sight. I promise to care for you with everything I am. I will forever treat you well, my Queen." 
            }
        ];

        let currentPage = 0;
        let yesScale = 1;
        let locationIndex = 0;

        // PRE-DETERMINED LOCATIONS (Percent of screen)
        // These are safe spots: Top Left, Bottom Right, Top Right, Middle Left, Bottom Left
        const locations = [
            { x: 10, y: 10 },
            { x: 70, y: 80 },
            { x: 70, y: 10 },
            { x: 10, y: 50 },
            { x: 10, y: 80 },
            { x: 40, y: 20 }
        ];

        function moveButton(e) {
            if(e) e.preventDefault();
            const btn = document.getElementById('noBtn');
            const loc = locations[locationIndex];

            btn.style.position = 'fixed';
            btn.style.left = loc.x + '%';
            btn.style.top = loc.y + '%';

            // Cycle through the locations
            locationIndex = (locationIndex + 1) % locations.length;

            // Grow Yes button
            yesScale += 0.2;
            const yesBtn = document.getElementById('yesBtn');
            if (yesScale > 3.5) yesScale = 3.5;
            yesBtn.style.transform = `scale(${yesScale})`;
        }

        function sayYes() {
            confetti({ particleCount: 200, spread: 80, origin: { y: 0.6 } });
            document.getElementById('question').innerText = "I knew you would say YES! ‚ù§Ô∏è";
            document.getElementById('mainButtons').style.display = 'none';
            document.getElementById('storyBtn').style.display = 'block';
        }

        function openBook() { document.getElementById('bookModal').style.display = 'flex'; updateBookContent(); }
        function closeBook() { document.getElementById('bookModal').style.display = 'none'; }
        function changePage(step) { currentPage += step; updateBookContent(); }

        function updateBookContent() {
            const content = document.getElementById('bookContent');
            const pageInfo = document.getElementById('pageIndicator');
            const ch = chapters[currentPage];
            let galleryHtml = ch.isFinal ? `<div class="gallery"><img src="photo1.jpg" onerror="this.style.display='none'"><img src="photo2.jpg" onerror="this.style.display='none'"><img src="photo3.jpg" onerror="this.style.display='none'"><img src="photo4.jpg" onerror="this.style.display='none'"></div>` : "";
            content.innerHTML = `<h2>${ch.title}</h2><p style="white-space: pre-line;">${ch.text}</p>${galleryHtml}`;
            pageInfo.innerText = `Page ${currentPage + 1} of ${chapters.length}`;
            document.getElementById('prevBtn').disabled = (currentPage === 0);
            document.getElementById('nextBtn').disabled = (currentPage === chapters.length - 1);
            content.scrollTop = 0;
        }

        setInterval(() => {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            heart.innerHTML = '‚ù§Ô∏è';
            heart.style.left = Math.random() * 100 + 'vw';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 4000);
        }, 600);
    </script>
</body>
</html>
